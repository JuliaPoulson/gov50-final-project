---
title: "Gov 50 Final Project"
author: "Julia Poulson"
description: "My final project"
output:
  distill::distill_article:
    self_contained: false
---

## Project thoughts

I am interested in exploring data related to the midterm election in an effort to determine the relationship between election indicators (gdp, inflation, presidential approval, etc) and election results. I am working through the HPR Tech team on a midterm election prediction model, and I am hoping to use the data acquired through that project to look at relationships between multiple factors and election results for the final project in this course.

## Proposal

In my final project, I will be attempting to see how strongly gas prices correlate to election results using inflation-adjusted gas prices and congressional election data (displaying vote share for each party, as well as the party holding the presidency for each election) from the past 40 years. I predict that gas prices have a strong inverse correlation with the tendency of populations to elect incumbent parties because peoplesâ€™ dissatisfaction with high gas prices is often directly aimed at the party in power, regardless of political affiliation. For this to be true, the regression between the percentage of vote earned by the current presidential party and the price of gas should have a significant negative correlation coefficient. I will also analyze the gas price data against Republican/Democratic vote share in order to see if gas prices are actually more strongly indicative of the party people elect, as opposed to if they choose to vote for the incumbent party. If this regression shows a strong correlation, or if my previous regression shows a positive or non-correlation between gas prices and incumbent party political success, my theory is likely wrong.

Gas Price Data: 
https://www.cnbc.com/2022/04/13/how-much-gas-cost-every-year-since-1978.html

Congressional Election Data:
https://docs.google.com/spreadsheets/d/1IfVf6tRtdyRHWzMCaCmHJyvYBGqEUER5BMeL26knLrQ/edit?usp=sharing


## Standardized Gas Prices and Incumbent Vote Percent Over Time

```{r include = FALSE}
library(tidyverse)
library(ggplot2)
library(infer)

```

```{r include = FALSE}
gas_prices <- read_csv("Gas Prices.csv")
gas_prices

house_results_raw <- read_csv("house-voting-history.csv")
house_results_raw

house_results <- house_results_raw |>
  select(year, R_seats, D_seats, Other_seats, R_totalvote_pct, D_totalvote_pct, Other_totalvote_pct, winner_party, president_party) |>
  mutate(incumbent_win = if_else(winner_party == president_party, 1, 0),
         incumbent_party_pct = if_else(president_party == "D", D_totalvote_pct, R_totalvote_pct))

elections_and_prices <-
  inner_join(gas_prices, house_results, join_by = year)

elections_and_prices_sd <- elections_and_prices |>
  mutate(incumbent_party_pct_sd = 
           (incumbent_party_pct - mean(incumbent_party_pct)) / sd(incumbent_party_pct),
         gas_price_sd = 
           (`gas-price` - mean(`gas-price`)) / sd(`gas-price`))
```

```{r echo=FALSE}
elections_and_prices_sd |>
  ggplot(mapping = aes(na.rm = TRUE)) +
  geom_line(mapping = aes(x = year, y = gas_price_sd, color = "Gas Prices")) +
  geom_line(mapping = aes(x = year, y = incumbent_party_pct_sd, color = "Incumbent Party Success")) +
  labs(x = "Year", 
       y = "Z-Score",  
       title = "Standardized Gas Prices and Incumbent Electoral Success Over Time") + 
  scale_colour_manual("", 
                      breaks = c("Gas Prices", "Incumbent Party Success"),
                      values = c("purple", "blue"))
```

## Gas Prices and Incumbent Party Vote Percentage Correlation

```{r echo=FALSE}
elections_and_prices |>
  ggplot(mapping = aes(x = `gas-price`, y = incumbent_party_pct)) +
  geom_point() +
  geom_smooth() + 
  labs(x = "Gas Prices", y = "Incumbent Party Vote Percentage", title = "Incumbent Party Vote Percent vs Gas Prices")
```

## Gas Price and Incumbent Party Vote Percentage Correlation Coefficient

```{r echo=FALSE}
correlation_coef <- cor(elections_and_prices$`gas-price`, elections_and_prices$incumbent_party_pct)

knitr::kable(correlation_coef)
```

This graph and related correlation coefficient demonstrate a very limited relationship between gas prices and the incumbent party vote share, a finding which goes against my original hypothesis. The correlation is negative, which I predicted, but it is so low (2%) that a hypothesis test would likely reveal a very high p-value that would disqualify any statistically significant relationship.

## Hypothesis Test

```{r echo=FALSE}
null_dist <- elections_and_prices |>
  specify(incumbent_party_pct ~ `gas-price`) |>
  hypothesize(null = "independence") |>
  generate(reps = 1000, type = "bootstrap") |>
  calculate(stat = "correlation")

visualize(null_dist) +
  shade_p_value(obs_stat = correlation_coef, direction = "both")

p_val <- null_dist |>
  get_p_value(obs_stat = correlation_coef, direction = "both")

knitr::kable(p_val)
```
The hypothesis test reveals that there is a 99% chance that this correlation value could have been created by random chance in a world in which the two values have absolutely no correlation. Given this, we can certainly not reject the null hypothesis, and instead likely should accept it as the most likely outcome of the analysis.


# Now, I will attempt the same experiment with vote by party, instead of incumbent vote percentage in order to compare the strength of the two relationships.


## Gas Prices and Democratic Party Vote Percentage Correlation

```{r echo=FALSE}
elections_and_prices |>
  ggplot(mapping = aes(x = `gas-price`, y = D_totalvote_pct)) +
  geom_point() +
  geom_smooth() + 
  labs(x = "Gas Prices", y = "Democratic Party Vote Percentage", title = "Democratic Party Vote Percent vs Gas Prices")
```

## Gas Price and Democratic Party Vote Percentage Correlation Coefficient

```{r echo=FALSE}
correlation_coef_party <- cor(elections_and_prices$`gas-price`, elections_and_prices$D_totalvote_pct)

knitr::kable(correlation_coef_party)
```

This graph and related correlation coefficient demonstrate a slightly stronger relationship between gas prices and the democratic party vote share, with democrats on average receiving more votes on years with higher gas prices, a finding which goes against my original hypothesis. The correlation goes against my prediction that Democrats would be less likely to receive votes on years with high gas prices. The strength of the correlation is stronger than the incumbent party percentage, but a hypothesis test is still imperative in determining the statistical validity of the relationship

## Hypothesis Test

```{r echo=FALSE}
null_dist_party <- elections_and_prices |>
  specify(D_totalvote_pct ~ `gas-price`) |>
  hypothesize(null = "independence") |>
  generate(reps = 1000, type = "bootstrap") |>
  calculate(stat = "correlation")

visualize(null_dist_party) +
  shade_p_value(obs_stat = correlation_coef, direction = "both")

p_val_party <- null_dist_party |>
  get_p_value(obs_stat = correlation_coef, direction = "both")

knitr::kable(p_val_party)
```

This hypothesis test reveals that there is a 42% chance that this correlation or stronger could be created by random chance in a scenario where the two variables have no correlation. Although this p-value is lower than the p-value for incumbent vote percentage, it is still far too high to be considered statistically significant when utilizing the traditional p-value benchmark metric of 0.05. Thus, according to my tests, neither of these relationships can be considered statistically significant and gas prices have not been proven to correlate to incumbent or democratic electoral success.

# Code

```{r print-code, ref.label=knitr::all_labels(), echo = TRUE, eval=FALSE}

```